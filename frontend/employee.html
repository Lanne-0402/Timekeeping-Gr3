<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Nh√¢n vi√™n | Ch·∫•m c√¥ng</title>
  <link rel="stylesheet" href="employee.css"/>
  <script defer src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>
  <script defer src="faceid.js"></script>
  <script defer src="employee.js"></script>
</head>
<body>
  <aside class="sidebar">
    <div class="brand"> Timekeeping </div>
    <nav class="nav">
      <button class="nav-item active" data-route="home">Trang ch·ªß</button>
      <button class="nav-item" data-route="history">L·ªãch s·ª≠ ch·∫•m c√¥ng</button>
    </nav>
    <div class="profile-mini">
      <div>
        <div class="name" id="miniName"> H·ªç v√† t√™n</div>
        <div class="status">Active</div>
      </div>
    </div>
    <button class="nav-item" data-route="settings">C√†i ƒë·∫∑t</button>
    <button class="nav-item" id="empLogout" >ƒêƒÉng xu·∫•t</button>
  </aside>

  <main class="main">
    <!-- C·ªôt ph·∫£i: ho·∫°t ƒë·ªông -->
    <aside class="activity">
      <h3>Ho·∫°t ƒë·ªông</h3>

      <section class="panel">
        <h4>T·ªïng quan</h4>
        <ul class="stats">
          <li><span id="daysWorked">0</span> ng√†y l√†m</li>
          <li><span id="daysOff">0</span> ng√†y ngh·ªâ</li>
        </ul>
      </section>
    </aside>

    <!-- N·ªôi dung ch√≠nh -->
    <section class="content">
      <!-- Trang ch·ªß -->
      <section id="home" class="route">
        <!-- h√†ng 1 -->
        <div class="row">
          <div class="card welcome">
            <div class="welcome-text">
              <div class="hello">Xin ch√†o, <span id="empName">H·ªç v√† t√™n</span></div>
              <div class="dept">B·ªô ph·∫≠n: <strong id="empDept"></strong></div>

            </div>
          </div>
        </div>

        <!-- h√†ng 2 -->
        <div class="row two">
          <div class="card cta">
            <div>
              <h4>Check-in</h4>
              <p>ƒêi·ªÉm danh ƒë·∫ßu ca b·∫±ng FaceID.</p>
            </div>
            <button class="btn primary" id="btnFaceCheckin">FaceID Check-in</button>
          </div>

          <div class="card cta">
            <div>
              <h4>Check-out</h4>
              <p>K·∫øt th√∫c ca l√†m b·∫±ng FaceID.</p>
            </div>
            <button class="btn outline" id="btnFaceCheckout">FaceID Check-out</button>
          </div>
        </div>

        <!-- h√†ng 3: L·ªãch th√°ng -->
        <div class="row">
          <div class="card calendar">
            <div class="calendar-head">
              <h4 id="calTitle">L·ªãch th√°ng</h4>
              <div class="cal-actions">
                <button id="prevM" class="icon-btn">‚Äπ</button>
                <button id="nextM" class="icon-btn">‚Ä∫</button>
              </div>
            </div>
            <div id="calendarGrid" class="cal-grid"></div>
            <div class="legend">
              <span class="ok">ƒë√£ ch·∫•m</span>
              <span class="no">ch∆∞a ch·∫•m</span>
              <span class="shift-tag">Ng√†y c√≥ ca</span>
            </div>
          </div>
        </div>
      </section>

      <!-- L·ªãch s·ª≠ (route ri√™ng) -->
      <section id="history" class="route hidden">
        <div class="card">
          <div class="history-head">
            <h3>L·ªãch s·ª≠ ch·∫•m c√¥ng</h3>
            <div class="filters">
              <input id="fromDate" type="date"/>
              <input id="toDate" type="date"/>
              <button id="btnFilter" class="btn">L·ªçc</button>
            </div>
          </div>

          <div class="table-wrap">
            <table class="table" id="histTable">
              <thead>
                <tr>
                  <th>Ng√†y</th>
                  <th>Check-in</th>
                  <th>Check-out</th>
                  <th>Gi·ªù l√†m</th>
                  <th>Ghi ch√∫</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </section>
       <!-- ================= C√ÄI ƒê·∫∂T ================= -->
        <section id="settings" class="route hidden">
          <div class="card" style="max-width: 520px;">
            <h2>C√†i ƒë·∫∑t</h2>
            <p style="color:var(--muted); margin-bottom:20px;">
              C·∫≠p nh·∫≠t m·∫≠t kh·∫©u v√† ƒëƒÉng k√Ω FaceID ƒë·ªÉ ch·∫•m c√¥ng nhanh h∆°n.
            </p>

            <!-- ===== ƒê·ªîI M·∫¨T KH·∫®U ===== -->
            <form id="changePassForm" class="settings-form">
              <label>
                <span>M·∫≠t kh·∫©u hi·ªán t·∫°i</span>
                <div class="pw-wrapper">
                  <input id="curPass" type="password" required>
                  <span class="toggle-pw" data-target="curPass">üëÅ</span>
                </div>
              </label>

              <label>
                <span>M·∫≠t kh·∫©u m·ªõi</span>
                <div class="pw-wrapper">
                  <input id="newPass" type="password" minlength="6" required>
                  <span class="toggle-pw" data-target="newPass">üëÅ</span>
                </div>
              </label>

              <label>
                <span>Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi</span>
                <div class="pw-wrapper">
                  <input id="newPass2" type="password" minlength="6" required>
                  <span class="toggle-pw" data-target="newPass2">üëÅ</span>
                </div>
              </label>

              <button type="submit" class="btn outline" style="width:40%; margin-top:8px;">
                L∆∞u m·∫≠t kh·∫©u
              </button>

              <div id="changePassMsg" style="margin-top:12px; font-size:14px;"></div>
            </form>


            <!-- ===== FACEID REGISTER ===== -->
            <h3 style="margin-bottom:6px;">ƒêƒÉng k√Ω FaceID</h3>
            <p style="color:var(--muted); margin-bottom:16px;">
              Thi·∫øt l·∫≠p FaceID ƒë·ªÉ check-in/check-out nhanh v√† ch√≠nh x√°c.
            </p>

            <button id="btnEnrollFaceID" class="btn outline" style="width:40%;">
              ƒêƒÉng k√Ω FaceID
            </button>
          </div>
      </section>
    </section>
  </main>

  <!-- faceid modal -->
  <dialog id="faceModal">
    <div class="qr-wrap">
      <video id="faceVideo" autoplay muted playsinline style="width:100%;border-radius:16px;"></video>
      <div id="faceStatus" style="margin-top:8px;font-size:14px;color:#444;">
        ƒêang chu·∫©n b·ªã FaceID...
      </div>
      <button class="btn" id="faceRetryBtn" style="margin-top:10px;">Th·ª≠ l·∫°i</button>
      <button class="btn close" id="faceCloseBtn" style="margin-top:10px;">ƒê√≥ng</button>
    </div>
  </dialog>
<div id="shiftDetailModal" class="modal-overlay hidden">
  <div class="modal-content">
    <h2>Chi ti·∫øt ca l√†m</h2>

    <div class="modal-row">
      <label>M√£ ca:</label><span id="modalShiftCode"></span>
    </div>
    <div class="modal-row">
      <label>T√™n ca:</label><span id="modalShiftName"></span>
    </div>
    <div class="modal-row">
      <label>Ng√†y:</label><span id="modalShiftDate"></span>
    </div>
    <div class="modal-row">
      <label>Gi·ªù:</label><span id="modalShiftTime"></span>
    </div>

    <button id="closeShiftDetail" class="btn-close">ƒê√≥ng</button>
  </div>
</div>


</body>
</html>
